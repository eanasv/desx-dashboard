{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{BarChart}from\"../../../components/Graph/barChart/BarChart\";import{getHttp}from\"../../../service/APIRequest\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Chart3=function Chart3(_ref){var selectedEntityList=_ref.selectedEntityList,entityList=_ref.entityList,fetchChart3Data=_ref.fetchChart3Data;var _useState=useState(),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setchartData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),xAxis=_useState4[0],setxAxis=_useState4[1];// const [dateRangeProps, setdateRangeProps] = useState({\n//   fromDate: startDate,\n//   toDate: endDate,\n// });\nvar _useState5=useState(selectedEntityList),_useState6=_slicedToArray(_useState5,2),selectedEntities=_useState6[0],setselectedEntities=_useState6[1];var _useState7=useState(entityList),_useState8=_slicedToArray(_useState7,2),allEntityList=_useState8[0],setallEntityList=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),startDate=_useState10[0],setStartDate=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),endDate=_useState12[0],setEndDate=_useState12[1];useEffect(function(){setallEntityList(allEntityList);setselectedEntities(selectedEntityList);getScoreOfSelectedEntity(startDate,endDate,selectedEntityList);},[selectedEntityList]);useEffect(function(){getScoreOfSelectedEntity(startDate,endDate);},[]);useEffect(function(){var today=new Date();var defaultEndDate=today.toISOString().slice(0,10);var oneYearAgo=new Date(today.getFullYear()-1,today.getMonth(),today.getDate());var defaultStartDate=oneYearAgo.toISOString().slice(0,10);setTimeout(function(){setStartDate(defaultStartDate);setEndDate(defaultEndDate);},110);},[]);var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),lastYearDate=_useState14[0],setLastYearDate=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),currentYearDate=_useState16[0],setcurrentYearDate=_useState16[1];useEffect(function(){//getScoreOfSelectedEntity(startDate, endDate);\n//setchartData(data);\n//setdateRangeProps({ fromDate: startDate, toDate: endDate });\n},[]);var getScoreOfSelectedEntity=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(startDate,endDate,selectedEntities){var _entityLists;var entityLists,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:entityLists=selectedEntities;if(((_entityLists=entityLists)===null||_entityLists===void 0?void 0:_entityLists.length)==0){entityLists=entityList===null||entityList===void 0?void 0:entityList.map(function(item){return item.label;});}_context.next=4;return getHttp(\"skills/skill-ranks\",{startDate:startDate,endDate:endDate,entityNames:entityLists.join(\",\")});case 4:response=_context.sent;_context.next=7;return drawChart(response);case 7:fetchChart3Data(response);case 8:case\"end\":return _context.stop();}},_callee);}));return function getScoreOfSelectedEntity(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();function drawChart(_x4){return _drawChart.apply(this,arguments);}function _drawChart(){_drawChart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(responseData){var xAxisdata;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:// var dataOfChart = [\n//   {\n//     name: \"Improvement over last year\", //chartData?.map((company) => company.entityName),\n//     data: responseData?.map((company) => company.avg_score_diff),\n//   },\n// ];\nxAxisdata=responseData===null||responseData===void 0?void 0:responseData.map(function(company){return company.entityName;});setxAxis(xAxisdata);setchartData(responseData===null||responseData===void 0?void 0:responseData.map(function(company){return company.avg_score_diff;}));case 3:case\"end\":return _context2.stop();}},_callee2);}));return _drawChart.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BarChart,{data:chartData,xAxis:xAxis,title:\"Analysis of score from last year\",type:\"progress\"})});};","map":{"version":3,"names":["React","useEffect","useState","BarChart","getHttp","Chart3","selectedEntityList","entityList","fetchChart3Data","chartData","setchartData","xAxis","setxAxis","selectedEntities","setselectedEntities","allEntityList","setallEntityList","startDate","setStartDate","endDate","setEndDate","getScoreOfSelectedEntity","today","Date","defaultEndDate","toISOString","slice","oneYearAgo","getFullYear","getMonth","getDate","defaultStartDate","setTimeout","lastYearDate","setLastYearDate","currentYearDate","setcurrentYearDate","entityLists","length","map","item","label","entityNames","join","response","drawChart","responseData","xAxisdata","company","entityName","avg_score_diff"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/Tabs/tab3/Chart3.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { BarChart } from \"../../../components/Graph/barChart/BarChart\";\nimport Component1 from \"../../../components/test/Component1\";\nimport { getHttp } from \"../../../service/APIRequest\";\n\ninterface Chart3Props {\n  startDate: any;\n  endDate: any;\n  selectedEntityList?: any;\n  entityList?: any;\n  fetchChart3Data?: any;\n}\nexport const Chart3: React.FC<Chart3Props> = ({\n  // startDate,\n  // endDate,\n  selectedEntityList,\n  entityList,\n  fetchChart3Data,\n}) => {\n  const [chartData, setchartData] = useState<any>();\n  const [xAxis, setxAxis] = useState([]);\n  // const [dateRangeProps, setdateRangeProps] = useState({\n  //   fromDate: startDate,\n  //   toDate: endDate,\n  // });\n  const [selectedEntities, setselectedEntities] = useState(selectedEntityList);\n  const [allEntityList, setallEntityList] = useState(entityList);\n\n  const [startDate, setStartDate] = useState<any>();\n  const [endDate, setEndDate] = useState(null);\n\n  useEffect(() => {\n    setallEntityList(allEntityList);\n    setselectedEntities(selectedEntityList);\n    getScoreOfSelectedEntity(startDate, endDate, selectedEntityList);\n  }, [selectedEntityList]);\n\n  useEffect(() => {\n    getScoreOfSelectedEntity(startDate, endDate);\n  }, []);\n\n  useEffect(() => {\n    const today = new Date();\n    const defaultEndDate = today.toISOString().slice(0, 10);\n    const oneYearAgo = new Date(\n      today.getFullYear() - 1,\n      today.getMonth(),\n      today.getDate()\n    );\n    const defaultStartDate = oneYearAgo.toISOString().slice(0, 10);\n    setTimeout(() => {\n      setStartDate(defaultStartDate);\n      setEndDate(defaultEndDate);\n    }, 110);\n  }, []);\n\n  const [lastYearDate, setLastYearDate] = useState<any>();\n  const [currentYearDate, setcurrentYearDate] = useState(null);\n\n  useEffect(() => {\n    //getScoreOfSelectedEntity(startDate, endDate);\n    //setchartData(data);\n    //setdateRangeProps({ fromDate: startDate, toDate: endDate });\n  }, []);\n\n  const getScoreOfSelectedEntity = async (\n    startDate,\n    endDate,\n    selectedEntities?\n  ) => {\n    var entityLists = selectedEntities;\n    if (entityLists?.length == 0) {\n      entityLists = entityList?.map((item) => item.label);\n    }\n    const response = await getHttp(\"skills/skill-ranks\", {\n      startDate: startDate,\n      endDate: endDate,\n      entityNames: entityLists.join(\",\"),\n    });\n    await drawChart(response);\n    fetchChart3Data(response);\n  };\n\n  async function drawChart(responseData?) {\n    // var dataOfChart = [\n    //   {\n    //     name: \"Improvement over last year\", //chartData?.map((company) => company.entityName),\n    //     data: responseData?.map((company) => company.avg_score_diff),\n    //   },\n    // ];\n    var xAxisdata = responseData?.map((company) => company.entityName);\n    setxAxis(xAxisdata);\n    setchartData(responseData?.map((company) => company.avg_score_diff));\n  }\n\n  return (\n    <div>\n      <BarChart\n        data={chartData}\n        xAxis={xAxis}\n        title={\"Analysis of score from last year\"}\n        type=\"progress\"\n      />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}