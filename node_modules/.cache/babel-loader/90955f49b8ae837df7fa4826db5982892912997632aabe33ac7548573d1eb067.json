{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{BarChart}from\"../../components/Graph/barChart/BarChart\";import Doughnut from\"../../components/Graph/donutChart/Doughnut\";import{getHttp}from\"../../service/APIRequest\";import\"./CategoryDetails.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CategoryDetails=function CategoryDetails(_ref){var _subCategoryList$;var details=_ref.details,backButtonClicked=_ref.backButtonClicked;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subCategoryList=_useState2[0],setSubCategoryList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedRow=_useState4[0],setSelectedRow=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),chartData=_useState6[0],setchartData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),xAxis=_useState8[0],setxAxis=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),barchartTitile=_useState10[0],setbarchartTitile=_useState10[1];var levelArray=new Array(9).fill(0);useEffect(function(){fetchCatagoryList(details.id);},[]);var fetchCatagoryList=function fetchCatagoryList(param){var response=getHttp(\"categories/\"+details.id+\"/subcategories\").then(function(response){//console.log(response);\nsetSubCategoryList(response);// handle success\n}).catch(function(error){console.log(error);// handle error\n});};var clickedOnSubcategory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,index){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:item.count>0?setSelectedRow(index):setSelectedRow(index);_context.next=3;return getHttp(\"categories/\"+details.id+\"/subcategory/\"+item.id).then(function(response){//console.log(response);\nsetbarchartTitile(item.category);drawChart(response);// handle success\n}).catch(function(error){console.log(error);// handle error\n});case 3:response=_context.sent;case 4:case\"end\":return _context.stop();}},_callee);}));return function clickedOnSubcategory(_x,_x2){return _ref2.apply(this,arguments);};}();function drawChart(_x3){return _drawChart.apply(this,arguments);}function _drawChart(){_drawChart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(responseData){var xAxisdata;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:xAxisdata=responseData===null||responseData===void 0?void 0:responseData.map(function(item){return item.entityName;});//setbarchartTitile(barchartTitile);\nsetxAxis(xAxisdata);setchartData(responseData===null||responseData===void 0?void 0:responseData.map(function(item){return item.employeeNumber;}));case 3:case\"end\":return _context2.stop();}},_callee2);}));return _drawChart.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"top-padding-sub\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:backButtonClicked,children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../../assets/back.png\"),alt:\"\",width:\"50px\",height:\"50px\"})}),details===null||details===void 0?void 0:details.name.category,(details===null||details===void 0?void 0:details.name.count)>0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Doughnut,{heading:\" skills (Number of employees in each category)\",details:subCategoryList,showLegend:false})}),(details===null||details===void 0?void 0:details.name.count)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"list-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"Subcategory name\"}),levelArray.map(function(item,index){return/*#__PURE__*/_jsxs(\"th\",{className:\"each-column-border\",children:[\"Level \",index+1]},index);}),/*#__PURE__*/_jsxs(\"th\",{className:\"each-column-border\",children:[\"# of employees( \",(_subCategoryList$=subCategoryList[0])===null||_subCategoryList$===void 0?void 0:_subCategoryList$.grantTotalEmp,\")\"]})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subCategoryList===null||subCategoryList===void 0?void 0:subCategoryList.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{className:selectedRow===index?\"highlight\":\"\",onClick:function onClick(){return clickedOnSubcategory(item,index);},children:[/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:item.category}),item.levelCounts.map(function(count,num){return/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:count==0?\"\":count},num);}),/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:item.count})]},index);})})]})}),chartData&&xAxis&&/*#__PURE__*/_jsx(\"div\",{className:\"barChart\",children:/*#__PURE__*/_jsx(BarChart,{data:chartData,xAxis:xAxis,title:\"Employee and entity details of  - \"+barchartTitile,name:\"Number of employees\"})})]});};export default CategoryDetails;","map":{"version":3,"names":["React","useEffect","useState","BarChart","Doughnut","getHttp","CategoryDetails","details","backButtonClicked","subCategoryList","setSubCategoryList","selectedRow","setSelectedRow","chartData","setchartData","xAxis","setxAxis","barchartTitile","setbarchartTitile","levelArray","Array","fill","fetchCatagoryList","id","param","response","then","catch","error","console","log","clickedOnSubcategory","item","index","count","category","drawChart","responseData","xAxisdata","map","entityName","employeeNumber","require","name","grantTotalEmp","levelCounts","num"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/categoryDetails/CategoryDetails.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { BarChart } from \"../../components/Graph/barChart/BarChart\";\nimport Doughnut from \"../../components/Graph/donutChart/Doughnut\";\nimport { getHttp } from \"../../service/APIRequest\";\nimport \"./CategoryDetails.css\";\n\nconst CategoryDetails = ({ details, backButtonClicked }) => {\n  const [subCategoryList, setSubCategoryList] = useState([]);\n  const [selectedRow, setSelectedRow] = useState(null);\n  const [chartData, setchartData] = useState<any>();\n  const [xAxis, setxAxis] = useState([]);\n  const [barchartTitile, setbarchartTitile] = useState(\"\");\n\n  var levelArray = new Array(9).fill(0);\n\n  useEffect(() => {\n    fetchCatagoryList(details.id);\n  }, []);\n\n  const fetchCatagoryList = (param?) => {\n    const response = getHttp(\"categories/\" + details.id + \"/subcategories\")\n      .then((response) => {\n        //console.log(response);\n\n        setSubCategoryList(response); // handle success\n      })\n      .catch((error) => {\n        console.log(error);\n        // handle error\n      });\n  };\n\n  const clickedOnSubcategory = async (item, index) => {\n    item.count > 0 ? setSelectedRow(index) : setSelectedRow(index);\n    const response = await getHttp(\n      \"categories/\" + details.id + \"/subcategory/\" + item.id\n    )\n      .then((response) => {\n        //console.log(response);\n        setbarchartTitile(item.category);\n        drawChart(response);\n\n        // handle success\n      })\n      .catch((error) => {\n        console.log(error);\n        // handle error\n      });\n  };\n\n  async function drawChart(responseData?) {\n    var xAxisdata = responseData?.map((item) => item.entityName);\n    //setbarchartTitile(barchartTitile);\n    setxAxis(xAxisdata);\n    setchartData(responseData?.map((item) => item.employeeNumber));\n  }\n\n  return (\n    <div className=\"top-padding-sub\">\n      <div className=\"back-button\" onClick={backButtonClicked}>\n        <img\n          src={require(\"../../assets/back.png\")}\n          alt=\"\"\n          width=\"50px\"\n          height=\"50px\"\n        />\n      </div>\n\n      {details?.name.category}\n      {details?.name.count > 0 && (\n        <div>\n          <Doughnut\n            heading={\" skills (Number of employees in each category)\"}\n            details={subCategoryList}\n            showLegend={false}\n          />\n        </div>\n      )}\n      {details?.name.count > 0 && (\n        <div className=\"list-container\">\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th className=\"each-column-border\">Subcategory name</th>\n\n                {levelArray.map((item, index) => (\n                  <th key={index} className=\"each-column-border\">\n                    Level {index + 1}\n                  </th>\n                ))}\n                <th className=\"each-column-border\">\n                  # of employees( {subCategoryList[0]?.grantTotalEmp})\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {subCategoryList?.map((item, index) => (\n                <tr\n                  key={index}\n                  className={selectedRow === index ? \"highlight\" : \"\"}\n                  onClick={() => clickedOnSubcategory(item, index)}\n                >\n                  <td className=\"each-column-border\">{item.category}</td>\n                  {item.levelCounts.map((count, num) => (\n                    <td key={num} className=\"each-column-border\">\n                      {count == 0 ? \"\" : count}\n                    </td>\n                  ))}\n                  <td className=\"each-column-border\">{item.count}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n      {/* <div className=\"content1\">\n        <Doughnut details={subCategoryList} heading=\"Dubai Skills %\" />\n      </div> */}\n      {chartData && xAxis && (\n        <div className=\"barChart\">\n          {/* <DonutChart\n              //details={chartDetails.data_analytics}\n              heading={props.entityName + \" skills\"}\n              details={roleCount}\n            /> */}\n          {/* <Doughnut\n          heading={\" skills (Number of employees in each category)\"}\n          details={subCategoryList}\n        /> */}\n          <BarChart\n            data={chartData}\n            xAxis={xAxis}\n            title={\"Employee and entity details of  - \" + barchartTitile}\n            name=\"Number of employees\"\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CategoryDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}