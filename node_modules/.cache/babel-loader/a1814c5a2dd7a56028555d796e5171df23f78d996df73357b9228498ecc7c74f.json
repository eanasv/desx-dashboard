{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import DonutChart from\"../../components/Graph/donutChart/DonutChart\";import RadialBarChart from\"../../components/Graph/donutChart/RadialBarChart\";import PopupModal from\"../../components/popup/PopupModal\";import ProgressCircle from\"../../components/progressCircle/ProgressCircle\";import{getHttp}from\"../../service/APIRequest\";import{getSkillPercentage}from\"../../service/Service\";import\"./EntityDetails.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EntityDetails=function EntityDetails(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),entityDetails=_useState2[0],setentityDetails=_useState2[1];//const [ColumnHeadingNameSet, setColumnHeadingNameSet] = useState([]);\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),roleCount=_useState4[0],setroleCount=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPopup=_useState6[0],setShowPopup=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),thisEmployeeDetails=_useState8[0],setthisEmployeeDetails=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),entityCatSkillSet=_useState10[0],setentityCatSkillSet=_useState10[1];function handleClick(){setShowPopup(!showPopup);}useEffect(function(){fetchEntityDetails();fetchRoleCountsInEntity();fetchSkillByCatInEntity();},[]);function fetchEntityDetails(){return _fetchEntityDetails.apply(this,arguments);}function _fetchEntityDetails(){_fetchEntityDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,finalResult,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getHttp(\"employees/\"+props.entityName);case 2:response=_context.sent;finalResult=[];for(i=0;i<response.length;i++){response[i].skillToTalPercentage=getSkillPercentage(response[i].skills);finalResult.push(response[i]);}_context.next=7;return setentityDetails(finalResult);case 7:_context.t0=console;_context.t1=response;_context.next=11;return finalResult;case 11:_context.t2=_context.sent;_context.t0.log.call(_context.t0,_context.t1,_context.t2);case 13:case\"end\":return _context.stop();}},_callee);}));return _fetchEntityDetails.apply(this,arguments);}function fetchRoleCountsInEntity(){return _fetchRoleCountsInEntity.apply(this,arguments);}function _fetchRoleCountsInEntity(){_fetchRoleCountsInEntity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getHttp(\"entity/count-by-category/\"+props.entityName);case 2:response=_context2.sent;_context2.next=5;return setroleCount(response);case 5:case\"end\":return _context2.stop();}},_callee2);}));return _fetchRoleCountsInEntity.apply(this,arguments);}function fetchSkillByCatInEntity(){return _fetchSkillByCatInEntity.apply(this,arguments);}// const getColumnHeading = (tableData) => {\n//   const newColumnHeadingNameSet = [];\n//   for (const key in tableData[0]) {\n//     newColumnHeadingNameSet.push(key);\n//   }\n//   setColumnHeadingNameSet(newColumnHeadingNameSet);\n// };\nfunction _fetchSkillByCatInEntity(){_fetchSkillByCatInEntity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getHttp(\"skillByCatInEntity?entity=\"+props.entityName);case 2:response=_context3.sent;_context3.next=5;return setentityCatSkillSet(response);case 5:case\"end\":return _context3.stop();}},_callee3);}));return _fetchSkillByCatInEntity.apply(this,arguments);}var showThisEmployeeDetails=function showThisEmployeeDetails(employeeDetails){setShowPopup(true);setthisEmployeeDetails(employeeDetails);};return/*#__PURE__*/_jsxs(\"div\",{className:\"enti-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"heading-cont\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:props.backButtonClicked,children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../../assets/back.png\"),alt:\"\",width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"heading\",children:props.entityName})]}),(entityDetails===null||entityDetails===void 0?void 0:entityDetails.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"top-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"employeeList\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"employee-details-heading\",children:\"Employee Details\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"Emloyee Number\"}),/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"Skill \"}),/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"Details\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:entityDetails===null||entityDetails===void 0?void 0:entityDetails.map(function(row,index){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(){return showThisEmployeeDetails(row);},children:[/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:row.employeeNumber}),/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:row.job}),/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:/*#__PURE__*/_jsx(ProgressCircle,{progress:row.skillToTalPercentage,size:60,strokeWidth:3,circleOneStroke:\"white\",circleTwoStroke:\"#2b6cb0\",reverse:\"false\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"each-column-border\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:require(\"../../assets/eye.png\"),alt:\"\",width:\"25px\"//   height=\"50%\"\n})]})]},index);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"donutDiv\",children:[/*#__PURE__*/_jsx(DonutChart//details={chartDetails.data_analytics}\n,{heading:props.entityName+\" skills\",details:roleCount}),showPopup&&/*#__PURE__*/_jsx(PopupModal,{employeDetails:thisEmployeeDetails,closeModal:function closeModal(){return setShowPopup(false);}})]})]}),/*#__PURE__*/_jsx(RadialBarChart,{details:entityCatSkillSet,heading:props.entityName+\" meet/not meet skills\"})]});};","map":{"version":3,"names":["React","useEffect","useState","DonutChart","RadialBarChart","PopupModal","ProgressCircle","getHttp","getSkillPercentage","EntityDetails","props","entityDetails","setentityDetails","roleCount","setroleCount","showPopup","setShowPopup","thisEmployeeDetails","setthisEmployeeDetails","entityCatSkillSet","setentityCatSkillSet","handleClick","fetchEntityDetails","fetchRoleCountsInEntity","fetchSkillByCatInEntity","entityName","response","finalResult","i","length","skillToTalPercentage","skills","push","console","log","showThisEmployeeDetails","employeeDetails","backButtonClicked","require","map","row","index","employeeNumber","job"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/entityDetails/EntityDetails.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport DonutChart from \"../../components/Graph/donutChart/DonutChart\";\nimport Doughnut from \"../../components/Graph/donutChart/Doughnut\";\nimport RadialBarChart from \"../../components/Graph/donutChart/RadialBarChart\";\nimport MyChart from \"../../components/Graph/MyChart\";\nimport PopupModal from \"../../components/popup/PopupModal\";\nimport ProgressCircle from \"../../components/progressCircle/ProgressCircle\";\nimport { getHttp } from \"../../service/APIRequest\";\nimport { getSkillPercentage } from \"../../service/Service\";\nimport \"./EntityDetails.css\";\n\nexport const EntityDetails = (props) => {\n  const [entityDetails, setentityDetails] = useState<any>();\n  //const [ColumnHeadingNameSet, setColumnHeadingNameSet] = useState([]);\n  const [roleCount, setroleCount] = useState();\n  const [showPopup, setShowPopup] = useState(false);\n  const [thisEmployeeDetails, setthisEmployeeDetails] = useState();\n  const [entityCatSkillSet, setentityCatSkillSet] = useState();\n\n  function handleClick() {\n    setShowPopup(!showPopup);\n  }\n\n  useEffect(() => {\n    fetchEntityDetails();\n    fetchRoleCountsInEntity();\n    fetchSkillByCatInEntity();\n  }, []);\n\n  async function fetchEntityDetails() {\n    const response = await getHttp(\"employees/\" + props.entityName);\n    var finalResult = [];\n    for (var i = 0; i < response.length; i++) {\n      response[i].skillToTalPercentage = getSkillPercentage(response[i].skills);\n      finalResult.push(response[i]);\n    }\n\n    await setentityDetails(finalResult);\n    console.log(response, await finalResult);\n    //await getColumnHeading(response);\n  }\n\n  async function fetchRoleCountsInEntity() {\n    const response = await getHttp(\n      \"entity/count-by-category/\" + props.entityName\n    );\n    await setroleCount(response);\n  }\n\n  async function fetchSkillByCatInEntity() {\n    const response = await getHttp(\n      \"skillByCatInEntity?entity=\" + props.entityName\n    );\n    await setentityCatSkillSet(response);\n  }\n\n  // const getColumnHeading = (tableData) => {\n  //   const newColumnHeadingNameSet = [];\n\n  //   for (const key in tableData[0]) {\n  //     newColumnHeadingNameSet.push(key);\n  //   }\n\n  //   setColumnHeadingNameSet(newColumnHeadingNameSet);\n  // };\n\n  const showThisEmployeeDetails = (employeeDetails) => {\n    setShowPopup(true);\n    setthisEmployeeDetails(employeeDetails);\n  };\n\n  return (\n    <div className=\"enti-container\">\n      <div className=\"heading-cont\">\n        <div className=\"back-button\" onClick={props.backButtonClicked}>\n          <img\n            src={require(\"../../assets/back.png\")}\n            alt=\"\"\n            width=\"50px\"\n            height=\"50px\"\n          />\n        </div>\n        <div className=\"heading\">{props.entityName}</div>\n      </div>\n\n      {entityDetails?.length > 0 && (\n        <div className=\"top-section\">\n          <div className=\"employeeList\">\n            <div className=\"employee-details-heading\">Employee Details</div>\n            <table className=\"table\">\n              <thead>\n                <tr>\n                  {/* <th\n                    className=\"each-column-border\"\n                    //hidden={header === \"entity\"}\n                  >\n                    Number\n                  </th> */}\n                  {/* {ColumnHeadingNameSet?.map((header, number) => (\n                    <th\n                      key={header}\n                      className=\"each-column-border\"\n                      //hidden={header === \"entity\"}\n                    >\n                      {header}\n                    </th>\n                  ))} */}\n                  <th className=\"each-column-border\">Emloyee Number</th>\n                  <th className=\"each-column-border\">Role</th>\n                  <th className=\"each-column-border\">Skill </th>\n                  <th className=\"each-column-border\">Details</th>\n                </tr>\n              </thead>\n              <tbody>\n                {entityDetails?.map((row, index) => (\n                  <tr key={index} onClick={() => showThisEmployeeDetails(row)}>\n                    {/* <td className=\"each-column-border\">{index + 1}</td> */}\n                    {/* {ColumnHeadingNameSet.map((header) => (\n                      <td\n                        key={header}\n                        className=\"each-column-border\"\n                        //hidden={row[header].equalsIgnoreCase(props.entityName)}\n                      >\n                        {row[header]} \n                        \n                      </td>\n                    ))} */}\n\n                    <td className=\"each-column-border\">{row.employeeNumber}</td>\n                    <td className=\"each-column-border\">{row.job}</td>\n                    <td className=\"each-column-border\">\n                      <ProgressCircle\n                        progress={row.skillToTalPercentage}\n                        size={60}\n                        strokeWidth={3}\n                        circleOneStroke=\"white\"\n                        circleTwoStroke=\"#2b6cb0\"\n                        reverse=\"false\"\n                      />\n                    </td>\n                    <td className=\"each-column-border\">\n                      {\" \"}\n                      <img\n                        src={require(`../../assets/eye.png`)}\n                        alt=\"\"\n                        width=\"25px\"\n                        //   height=\"50%\"\n                      />\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          <div className=\"donutDiv\">\n            <DonutChart\n              //details={chartDetails.data_analytics}\n              heading={props.entityName + \" skills\"}\n              details={roleCount}\n            />\n            {/* <MyChart /> */}\n\n            {showPopup && (\n              <PopupModal\n                employeDetails={thisEmployeeDetails}\n                closeModal={() => setShowPopup(false)}\n              />\n            )}\n          </div>\n        </div>\n      )}\n      {/* <Doughnut\n        //details={chartDetails.data_analytics}\n        multiLayer={true}\n        details={entityCatSkillSet}\n        heading={props.entityName + \" meet/not meet skills\"}\n      /> */}\n      <RadialBarChart\n        details={entityCatSkillSet}\n        heading={props.entityName + \" meet/not meet skills\"}\n      />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}