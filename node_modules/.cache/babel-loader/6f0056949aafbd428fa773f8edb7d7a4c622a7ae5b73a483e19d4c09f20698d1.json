{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{DateRangeFilter}from\"../../../components/dateRangeFilter/DateRangeFilter\";import DropDown from\"../../../components/dropDown/DropDown\";import{SubHeader}from\"../../../components/subHeader/SubHeader\";import{getHttp}from\"../../../service/APIRequest\";import\"../Tabs.css\";import Chart1 from\"./Chart1\";import Chart2 from\"./Chart2\";import{Chart3}from\"./Chart3\";import{Chart4}from\"./Chart4\";import{SummaryTable}from\"./SummaryTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tab3=function Tab3(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),endDate=_useState4[0],setEndDate=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),chartOneData=_useState6[0],setchartOneData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),entityListForDropDown=_useState8[0],setentityListForDropDown=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),chart3Data=_useState10[0],setchart3Data=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),selectedItemDropdown=_useState12[0],setselectedItemDropdown=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),data=_useState14[0],setData=_useState14[1];var handleDataChange=function handleDataChange(newData){setData(newData);};var userDeatilsString=sessionStorage.getItem(\"userDetails\");var userDetailsObj=JSON.parse(userDeatilsString);console.log(userDetailsObj===null||userDetailsObj===void 0?void 0:userDetailsObj.entity);useEffect(function(){if(userDetailsObj!==null&&userDetailsObj!==void 0&&userDetailsObj.entity){var userEntity=[userDetailsObj===null||userDetailsObj===void 0?void 0:userDetailsObj.entity];setselectedItemDropdown(userEntity);setentityListForDropDown([{label:userEntity,vaue:userEntity}]);}else{getEntityList();}// drawBarChart(startDate, endDate);\n},[]);useEffect(function(){},[startDate,endDate]);var getEntityList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getHttp(\"entity/getNameDetails\");case 2:response=_context.sent;_context.next=5;return setentityListForDropDown(response);case 5:_context.next=7;return setselectedItemDropdown(response===null||response===void 0?void 0:response.map(function(item){return item.label;}));case 7:case\"end\":return _context.stop();}},_callee);}));return function getEntityList(){return _ref.apply(this,arguments);};}();var fetchChartData=function fetchChartData(data){if(data){setchartOneData(data);}else{setchartOneData(null);}//}, 11);\n};var handleChangeValue=function handleChangeValue(data){console.log(data,\"\");setchartOneData(null);setselectedItemDropdown(data===null||data===void 0?void 0:data.map(function(item){return item.label;}));//console.log(data.length);\nif(data.length==1){}};// const drawLineChart = async (startDateParam, endDateParam) => {\n//   fetchDates(startDateParam, endDateParam);\n//   if (startDateParam && endDateParam) {\n//     const response = await getHttp(\"skills/companyAverageScore\", {\n//       startDate: startDateParam,\n//       endDate: endDateParam,\n//     });\n//     fetchChartData(response);\n//     return { startDate, endDate };\n//   }\n//   return null;\n// };\n// const drawBarChart = async (startDateParam, endDateParam) => {\n//   const response = await getHttp(\"skills/skill-ranks\", {\n//     startDate: startDateParam,\n//     endDate: endDateParam,\n//   });\n//   // setTimeout(() => {\n//   setchart3Data(response);\n//   // }, 11);\n// };\nvar fetchDates=function fetchDates(fromDate,toDate){setStartDate(fromDate);setEndDate(toDate);};var fetchChart4Data=function fetchChart4Data(data){//setsummaryData(data);\n// console.log(data.map((item) => item.companyName));\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"content-top-margin \",children:[/*#__PURE__*/_jsx(SubHeader,{pageHeadding:\"digital historical scoring\",showBreadcrumbs:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-filter-container\",children:[!(userDetailsObj!==null&&userDetailsObj!==void 0&&userDetailsObj.entity)&&/*#__PURE__*/_jsx(DropDown,{mainList:entityListForDropDown,name:\"Entity\",onChangeDropDownItem:handleChangeValue,isMulti:true,classname:\"margin\"}),/*#__PURE__*/_jsx(DateRangeFilter,{fetchChartData:fetchChartData,fetchDates:fetchDates,selectedEntityList:selectedItemDropdown,entityList:entityListForDropDown})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-contentainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-first-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-box-chart1\",children:/*#__PURE__*/_jsx(Chart1,{data:chartOneData})}),!(userDetailsObj!==null&&userDetailsObj!==void 0&&userDetailsObj.entity)&&/*#__PURE__*/_jsx(\"div\",{className:\"flex-box-chart2\",children:/*#__PURE__*/_jsx(Chart2,{startDate:startDate,endDate:endDate,entityListForDropDown:entityListForDropDown})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-sec-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-box-chart1\",children:/*#__PURE__*/_jsx(Chart3,{startDate:startDate,endDate:endDate,selectedEntityList:selectedItemDropdown,entityList:entityListForDropDown//fetchChart3Data={fetchChart3Data}\n})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-box-chart2\",children:/*#__PURE__*/_jsx(Chart4,{selectedEntityList:selectedItemDropdown,entityList:entityListForDropDown,fetchChart4Data:fetchChart4Data})})]}),!(userDetailsObj!==null&&userDetailsObj!==void 0&&userDetailsObj.entity)&&/*#__PURE__*/_jsxs(\"div\",{className:\"summary-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"summary-text\",children:\"Summary\"}),/*#__PURE__*/_jsx(SummaryTable,{entityList:entityListForDropDown})]})]})]});};export default Tab3;","map":{"version":3,"names":["React","useEffect","useState","DateRangeFilter","DropDown","SubHeader","getHttp","Chart1","Chart2","Chart3","Chart4","SummaryTable","Tab3","startDate","setStartDate","endDate","setEndDate","chartOneData","setchartOneData","entityListForDropDown","setentityListForDropDown","chart3Data","setchart3Data","selectedItemDropdown","setselectedItemDropdown","data","setData","handleDataChange","newData","userDeatilsString","sessionStorage","getItem","userDetailsObj","JSON","parse","console","log","entity","userEntity","label","vaue","getEntityList","response","map","item","fetchChartData","handleChangeValue","length","fetchDates","fromDate","toDate","fetchChart4Data"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/Tabs/tab3/Tab3.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { DateRangeFilter } from \"../../../components/dateRangeFilter/DateRangeFilter\";\nimport DropDown from \"../../../components/dropDown/DropDown\";\nimport { SubHeader } from \"../../../components/subHeader/SubHeader\";\nimport { getHttp } from \"../../../service/APIRequest\";\nimport \"../Tabs.css\";\nimport Chart1 from \"./Chart1\";\nimport Chart2 from \"./Chart2\";\nimport { Chart3 } from \"./Chart3\";\nimport { Chart4 } from \"./Chart4\";\nimport { SummaryTable } from \"./SummaryTable\";\n\nconst Tab3 = () => {\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [chartOneData, setchartOneData] = useState();\n  const [entityListForDropDown, setentityListForDropDown] = useState([]);\n  const [chart3Data, setchart3Data] = useState();\n  const [selectedItemDropdown, setselectedItemDropdown] = useState([]);\n\n  const [data, setData] = useState(\"\");\n\n  const handleDataChange = (newData) => {\n    setData(newData);\n  };\n\n  var userDeatilsString = sessionStorage.getItem(\"userDetails\");\n  var userDetailsObj = JSON.parse(userDeatilsString);\n  console.log(userDetailsObj?.entity);\n\n  useEffect(() => {\n    if (userDetailsObj?.entity) {\n      var userEntity = [userDetailsObj?.entity];\n      setselectedItemDropdown(userEntity);\n      setentityListForDropDown([{ label: userEntity, vaue: userEntity }]);\n    } else {\n      getEntityList();\n    }\n    // drawBarChart(startDate, endDate);\n  }, []);\n\n  useEffect(() => {}, [startDate, endDate]);\n\n  const getEntityList = async () => {\n    const response = await getHttp(\"entity/getNameDetails\");\n    await setentityListForDropDown(response);\n    await setselectedItemDropdown(response?.map((item) => item.label));\n  };\n\n  const fetchChartData = (data) => {\n    if (data) {\n      setchartOneData(data);\n    } else {\n      setchartOneData(null);\n    }\n    //}, 11);\n  };\n\n  const handleChangeValue = (data) => {\n    console.log(data, \"\");\n    setchartOneData(null);\n    setselectedItemDropdown(data?.map((item) => item.label));\n    //console.log(data.length);\n    if (data.length == 1) {\n    }\n  };\n\n  // const drawLineChart = async (startDateParam, endDateParam) => {\n  //   fetchDates(startDateParam, endDateParam);\n  //   if (startDateParam && endDateParam) {\n  //     const response = await getHttp(\"skills/companyAverageScore\", {\n  //       startDate: startDateParam,\n  //       endDate: endDateParam,\n  //     });\n  //     fetchChartData(response);\n\n  //     return { startDate, endDate };\n  //   }\n  //   return null;\n  // };\n\n  // const drawBarChart = async (startDateParam, endDateParam) => {\n  //   const response = await getHttp(\"skills/skill-ranks\", {\n  //     startDate: startDateParam,\n  //     endDate: endDateParam,\n  //   });\n  //   // setTimeout(() => {\n  //   setchart3Data(response);\n  //   // }, 11);\n  // };\n\n  const fetchDates = (fromDate, toDate) => {\n    setStartDate(fromDate);\n    setEndDate(toDate);\n  };\n\n  const fetchChart4Data = (data) => {\n    //setsummaryData(data);\n    // console.log(data.map((item) => item.companyName));\n  };\n\n  return (\n    <div className=\"content-top-margin \">\n      <SubHeader\n        pageHeadding=\"digital historical scoring\"\n        showBreadcrumbs={true}\n      />\n      {/* <div className=\"main-heading\">Digital skills historical scoring</div> */}\n      <div className=\"tab3-filter-container\">\n        {!userDetailsObj?.entity && (\n          <DropDown\n            mainList={entityListForDropDown}\n            name=\"Entity\"\n            onChangeDropDownItem={handleChangeValue}\n            isMulti={true}\n            classname=\"margin\"\n          />\n        )}\n        <DateRangeFilter\n          fetchChartData={fetchChartData}\n          fetchDates={fetchDates}\n          selectedEntityList={selectedItemDropdown}\n          entityList={entityListForDropDown}\n        />\n      </div>\n      <div className=\"tab3-contentainer\">\n        <div className=\"tab3-first-row\">\n          <div className=\"flex-box-chart1\">\n            <Chart1 data={chartOneData} />\n          </div>\n          {!userDetailsObj?.entity && (\n            <div className=\"flex-box-chart2\">\n              <Chart2\n                startDate={startDate}\n                endDate={endDate}\n                entityListForDropDown={entityListForDropDown}\n              />\n            </div>\n          )}\n        </div>\n        <div className=\"tab3-sec-row\">\n          <div className=\"flex-box-chart1\">\n            <Chart3\n              startDate={startDate}\n              endDate={endDate}\n              selectedEntityList={selectedItemDropdown}\n              entityList={entityListForDropDown}\n              //fetchChart3Data={fetchChart3Data}\n            />\n          </div>\n          <div className=\"flex-box-chart2\">\n            <Chart4\n              selectedEntityList={selectedItemDropdown}\n              entityList={entityListForDropDown}\n              fetchChart4Data={fetchChart4Data}\n            />\n          </div>\n        </div>\n        {/* {summaryData && ( */}\n        {!userDetailsObj?.entity && (\n          <div className=\"summary-table\">\n            <div className=\"summary-text\">Summary</div>\n            <SummaryTable entityList={entityListForDropDown} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Tab3;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}