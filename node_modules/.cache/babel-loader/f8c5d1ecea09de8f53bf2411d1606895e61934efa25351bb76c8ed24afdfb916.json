{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{DateRangeFilter}from\"../../../components/dateRangeFilter/DateRangeFilter\";import DropDown from\"../../../components/dropDown/DropDown\";import{getHttp}from\"../../../service/APIRequest\";import\"../Tabs.css\";import Chart1 from\"./Chart1\";import Chart2 from\"./Chart2\";import{Chart3}from\"./Chart3\";import{Chart4}from\"./Chart4\";import{SummaryTable}from\"./SummaryTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tab3=function Tab3(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),endDate=_useState4[0],setEndDate=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),chartOneData=_useState6[0],setchartOneData=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),entityListForDropDown=_useState8[0],setentityListForDropDown=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),chart3Data=_useState10[0],setchart3Data=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),selectedItemDropdown=_useState12[0],setselectedItemDropdown=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),summaryData=_useState14[0],setsummaryData=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),data=_useState16[0],setData=_useState16[1];var handleDataChange=function handleDataChange(newData){setData(newData);};useEffect(function(){getEntityList();drawBarChart(startDate,endDate);},[startDate,endDate]);useEffect(function(){console.log(startDate,endDate);},[startDate,endDate]);var getEntityList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getHttp(\"entity/getAll\");case 2:response=_context.sent;_context.next=5;return setentityListForDropDown(response);case 5:_context.next=7;return setselectedItemDropdown(response===null||response===void 0?void 0:response.map(function(item){return item.label;}));case 7:case\"end\":return _context.stop();}},_callee);}));return function getEntityList(){return _ref.apply(this,arguments);};}();var fetchChartData=function fetchChartData(data){if(data){setchartOneData(data);}else{setchartOneData(null);}//}, 11);\n};var handleChangeValue=function handleChangeValue(data){setchartOneData(null);setselectedItemDropdown(data===null||data===void 0?void 0:data.map(function(item){return item.label;}));};var drawLineChart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(startDateParam,endDateParam){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetchDates(startDateParam,endDateParam);if(!(startDateParam&&endDateParam)){_context2.next=7;break;}_context2.next=4;return getHttp(\"skills/companyAverageScore\",{startDate:startDateParam,endDate:endDateParam});case 4:response=_context2.sent;fetchChartData(response);return _context2.abrupt(\"return\",{startDate:startDate,endDate:endDate});case 7:return _context2.abrupt(\"return\",null);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function drawLineChart(_x,_x2){return _ref2.apply(this,arguments);};}();var drawBarChart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(startDateParam,endDateParam){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getHttp(\"skills/skill-ranks\",{startDate:startDateParam,endDate:endDateParam});case 2:response=_context3.sent;// setTimeout(() => {\nsetchart3Data(response);// }, 11);\ncase 4:case\"end\":return _context3.stop();}},_callee3);}));return function drawBarChart(_x3,_x4){return _ref3.apply(this,arguments);};}();var fetchDates=function fetchDates(fromDate,toDate){setStartDate(fromDate);setEndDate(toDate);};var fetchChart3Data=function fetchChart3Data(data){console.log(data);setsummaryData(data);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-heading\",children:\"content will populate here\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-filter-container\",children:[/*#__PURE__*/_jsx(DropDown,{mainList:entityListForDropDown,name:\"Entity\",onChangeDropDownItem:handleChangeValue,isMulti:true}),/*#__PURE__*/_jsx(DateRangeFilter,{fetchChartData:fetchChartData,fetchDates:fetchDates,selectedEntityList:selectedItemDropdown,entityList:entityListForDropDown})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-contentainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-first-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Chart1,{data:chartOneData})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Chart2,{startDate:startDate,endDate:endDate,entityListForDropDown:entityListForDropDown})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab3-first-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Chart3,{startDate:startDate,endDate:endDate,selectedEntityList:selectedItemDropdown,entityList:entityListForDropDown,fetchChart3Data:fetchChart3Data})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Chart4,{selectedEntityList:selectedItemDropdown,entityList:entityListForDropDown})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"Summary\"}),/*#__PURE__*/_jsx(SummaryTable,{data:summaryData})]})]})]});};export default Tab3;","map":{"version":3,"names":["React","useEffect","useState","DateRangeFilter","DropDown","getHttp","Chart1","Chart2","Chart3","Chart4","SummaryTable","Tab3","startDate","setStartDate","endDate","setEndDate","chartOneData","setchartOneData","entityListForDropDown","setentityListForDropDown","chart3Data","setchart3Data","selectedItemDropdown","setselectedItemDropdown","summaryData","setsummaryData","data","setData","handleDataChange","newData","getEntityList","drawBarChart","console","log","response","map","item","label","fetchChartData","handleChangeValue","drawLineChart","startDateParam","endDateParam","fetchDates","fromDate","toDate","fetchChart3Data"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/Tabs/tab3/Tab3.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { DateRangeFilter } from \"../../../components/dateRangeFilter/DateRangeFilter\";\nimport DropDown from \"../../../components/dropDown/DropDown\";\nimport { getHttp } from \"../../../service/APIRequest\";\nimport \"../Tabs.css\";\nimport Chart1 from \"./Chart1\";\nimport Chart2 from \"./Chart2\";\nimport { Chart3 } from \"./Chart3\";\nimport { Chart4 } from \"./Chart4\";\nimport { SummaryTable } from \"./SummaryTable\";\n\nconst Tab3 = () => {\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [chartOneData, setchartOneData] = useState();\n  const [entityListForDropDown, setentityListForDropDown] = useState();\n  const [chart3Data, setchart3Data] = useState();\n  const [selectedItemDropdown, setselectedItemDropdown] = useState();\n  const [summaryData, setsummaryData] = useState();\n\n  const [data, setData] = useState(\"\");\n\n  const handleDataChange = (newData) => {\n    setData(newData);\n  };\n\n  useEffect(() => {\n    getEntityList();\n    drawBarChart(startDate, endDate);\n  }, [startDate, endDate]);\n\n  useEffect(() => {\n    console.log(startDate, endDate);\n  }, [startDate, endDate]);\n\n  const getEntityList = async () => {\n    const response = await getHttp(\"entity/getAll\");\n    await setentityListForDropDown(response);\n    await setselectedItemDropdown(response?.map((item) => item.label));\n  };\n\n  const fetchChartData = (data) => {\n    if (data) {\n      setchartOneData(data);\n    } else {\n      setchartOneData(null);\n    }\n    //}, 11);\n  };\n\n  const handleChangeValue = (data) => {\n    setchartOneData(null);\n    setselectedItemDropdown(data?.map((item) => item.label));\n  };\n\n  const drawLineChart = async (startDateParam, endDateParam) => {\n    fetchDates(startDateParam, endDateParam);\n    if (startDateParam && endDateParam) {\n      const response = await getHttp(\"skills/companyAverageScore\", {\n        startDate: startDateParam,\n        endDate: endDateParam,\n      });\n      fetchChartData(response);\n\n      return { startDate, endDate };\n    }\n    return null;\n  };\n\n  const drawBarChart = async (startDateParam, endDateParam) => {\n    const response = await getHttp(\"skills/skill-ranks\", {\n      startDate: startDateParam,\n      endDate: endDateParam,\n    });\n    // setTimeout(() => {\n    setchart3Data(response);\n    // }, 11);\n  };\n\n  const fetchDates = (fromDate, toDate) => {\n    setStartDate(fromDate);\n    setEndDate(toDate);\n  };\n\n  const fetchChart3Data = (data) => {\n    console.log(data);\n    setsummaryData(data);\n  };\n\n  return (\n    <div>\n      <div className=\"main-heading\">content will populate here</div>\n      <div className=\"tab3-filter-container\">\n        <DropDown\n          mainList={entityListForDropDown}\n          name=\"Entity\"\n          onChangeDropDownItem={handleChangeValue}\n          isMulti={true}\n        />\n        <DateRangeFilter\n          fetchChartData={fetchChartData}\n          fetchDates={fetchDates}\n          selectedEntityList={selectedItemDropdown}\n          entityList={entityListForDropDown}\n        />\n      </div>\n      <div className=\"tab3-contentainer\">\n        <div className=\"tab3-first-row\">\n          <div>\n            <Chart1 data={chartOneData} />\n          </div>\n          <div>\n            <Chart2\n              startDate={startDate}\n              endDate={endDate}\n              entityListForDropDown={entityListForDropDown}\n            />\n          </div>\n        </div>\n        <div className=\"tab3-first-row\">\n          <div>\n            <Chart3\n              startDate={startDate}\n              endDate={endDate}\n              selectedEntityList={selectedItemDropdown}\n              entityList={entityListForDropDown}\n              fetchChart3Data={fetchChart3Data}\n            />\n          </div>\n          <div>\n            <Chart4\n              selectedEntityList={selectedItemDropdown}\n              entityList={entityListForDropDown}\n            />\n          </div>\n        </div>\n        <div>\n          <div>Summary</div>\n          <SummaryTable data={summaryData} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Tab3;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}