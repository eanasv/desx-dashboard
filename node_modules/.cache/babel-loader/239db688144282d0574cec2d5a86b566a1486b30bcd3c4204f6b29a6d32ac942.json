{"ast":null,"code":"import _toConsumableArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import DropDown from\"../../../components/dropDown/DropDown\";import LineChart from\"../../../components/Graph/lineChart/LineChart\";import{getHttp}from\"../../../service/APIRequest\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chart2=function Chart2(_ref){var startDate=_ref.startDate,endDate=_ref.endDate,entityListForDropDown=_ref.entityListForDropDown;var _useState=useState(entityListForDropDown),_useState2=_slicedToArray(_useState,2),selectList1Entity=_useState2[0],setSelectList1Entity=_useState2[1];var _useState3=useState(entityListForDropDown),_useState4=_slicedToArray(_useState3,2),selectList2Entity=_useState4[0],setSelectList2Entity=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),chartData=_useState6[0],setchartData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),xAxis=_useState8[0],setxAxis=_useState8[1];var _useState9=useState({fromDate:startDate,toDate:endDate}),_useState10=_slicedToArray(_useState9,2),dateRangeProps=_useState10[0],setdateRangeProps=_useState10[1];useEffect(function(){getScoreOfSelectedEntity(\"none\");setSelectList1Entity(entityListForDropDown);setSelectList2Entity(entityListForDropDown);},[startDate,endDate,dateRangeProps]);useEffect(function(){setSelectList1Entity(entityListForDropDown);setSelectList2Entity(entityListForDropDown);},[entityListForDropDown]);// const getEntityList = async () => {\n//   const response = await getHttp(\"entity/getAll\");\n//   await setSelectList1Entity(response);\n//   await setSelectList2Entity(response);\n//   //setentityListForDropDown(response);\n// };\nfunction handleChange1Value(selectedOption){getScoreOfSelectedEntity(selectedOption.label);}function handleChange2Value(selectedOption){getScoreOfSelectedEntity(selectedOption.label);}function drawChart(_x){return _drawChart.apply(this,arguments);}function _drawChart(){_drawChart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(responseData){var _responseData$,_responseData$2,_responseData$2$month,_responseData$0$month;var dataOfOneChart,xAxisdata;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dataOfOneChart={name:(_responseData$=responseData[0])===null||_responseData$===void 0?void 0:_responseData$.companyName,data:(_responseData$2=responseData[0])===null||_responseData$2===void 0?void 0:(_responseData$2$month=_responseData$2.monthlyAverages)===null||_responseData$2$month===void 0?void 0:_responseData$2$month.map(function(monthlyAverage){return monthlyAverage.averageScore;})};xAxisdata=(_responseData$0$month=responseData[0].monthlyAverages)===null||_responseData$0$month===void 0?void 0:_responseData$0$month.map(function(monthlyAverage){return monthlyAverage.month;});setxAxis(xAxisdata);setchartData(function(prevState){return[].concat(_toConsumableArray(prevState),[dataOfOneChart]);});case 4:case\"end\":return _context2.stop();}},_callee2);}));return _drawChart.apply(this,arguments);}var getScoreOfSelectedEntity=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(entityName){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!entityName){_context.next=7;break;}_context.next=3;return getHttp(\"skills/averageScoreOfEntity\",{startDate:startDate,endDate:endDate,entityName:entityName});case 3:response=_context.sent;drawChart(response);_context.next=8;break;case 7:drawChart();case 8:case\"end\":return _context.stop();}},_callee);}));return function getScoreOfSelectedEntity(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"drop-down-tab3\",children:[/*#__PURE__*/_jsx(DropDown,{mainList:selectList1Entity,name:\"First Entity\",onChangeDropDownItem:handleChange1Value,isMulti:false}),/*#__PURE__*/_jsx(DropDown,{mainList:selectList2Entity,name:\"Second Entity\",onChangeDropDownItem:handleChange2Value,isMulti:false})]}),/*#__PURE__*/_jsx(LineChart,{data:chartData,xAxis:xAxis,title:\"Compare 2 entities\"})]});};export default Chart2;","map":{"version":3,"names":["React","useEffect","useState","DropDown","LineChart","getHttp","Chart2","startDate","endDate","entityListForDropDown","selectList1Entity","setSelectList1Entity","selectList2Entity","setSelectList2Entity","chartData","setchartData","xAxis","setxAxis","fromDate","toDate","dateRangeProps","setdateRangeProps","getScoreOfSelectedEntity","handleChange1Value","selectedOption","label","handleChange2Value","drawChart","responseData","dataOfOneChart","name","companyName","data","monthlyAverages","map","monthlyAverage","averageScore","xAxisdata","month","prevState","entityName","response"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/Tabs/tab3/Chart2.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport DropDown from \"../../../components/dropDown/DropDown\";\nimport LineChart from \"../../../components/Graph/lineChart/LineChart\";\nimport { getHttp } from \"../../../service/APIRequest\";\n\ninterface Chart2Props {\n  startDate: any;\n  endDate: any;\n  entityListForDropDown: any;\n}\nconst Chart2: React.FC<Chart2Props> = ({\n  startDate,\n  endDate,\n  entityListForDropDown,\n}) => {\n  const [selectList1Entity, setSelectList1Entity] = useState(\n    entityListForDropDown\n  );\n  const [selectList2Entity, setSelectList2Entity] = useState(\n    entityListForDropDown\n  );\n  const [chartData, setchartData] = useState([]);\n  const [xAxis, setxAxis] = useState([]);\n  const [dateRangeProps, setdateRangeProps] = useState({\n    fromDate: startDate,\n    toDate: endDate,\n  });\n  useEffect(() => {\n    getScoreOfSelectedEntity(\"none\");\n    setSelectList1Entity(entityListForDropDown);\n    setSelectList2Entity(entityListForDropDown);\n  }, [startDate, endDate, dateRangeProps]);\n\n  useEffect(() => {\n    setSelectList1Entity(entityListForDropDown);\n    setSelectList2Entity(entityListForDropDown);\n  }, [entityListForDropDown]);\n\n  // const getEntityList = async () => {\n  //   const response = await getHttp(\"entity/getAll\");\n  //   await setSelectList1Entity(response);\n  //   await setSelectList2Entity(response);\n  //   //setentityListForDropDown(response);\n  // };\n\n  function handleChange1Value(selectedOption) {\n    getScoreOfSelectedEntity(selectedOption.label);\n  }\n\n  function handleChange2Value(selectedOption) {\n    getScoreOfSelectedEntity(selectedOption.label);\n  }\n\n  async function drawChart(responseData?) {\n    var dataOfOneChart = {\n      name: responseData[0]?.companyName,\n      data: responseData[0]?.monthlyAverages?.map((monthlyAverage) => {\n        return monthlyAverage.averageScore;\n      }),\n    };\n    var xAxisdata = responseData[0].monthlyAverages?.map((monthlyAverage) => {\n      return monthlyAverage.month;\n    });\n    setxAxis(xAxisdata);\n    setchartData((prevState) => [...prevState, dataOfOneChart]);\n  }\n\n  const getScoreOfSelectedEntity = async (entityName) => {\n    if (entityName) {\n      const response = await getHttp(\"skills/averageScoreOfEntity\", {\n        startDate: startDate,\n        endDate: endDate,\n        entityName: entityName,\n      });\n      drawChart(response);\n    } else {\n      drawChart();\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"drop-down-tab3\">\n        <DropDown\n          mainList={selectList1Entity}\n          name=\"First Entity\"\n          onChangeDropDownItem={handleChange1Value}\n          isMulti={false}\n        />\n        <DropDown\n          mainList={selectList2Entity}\n          name=\"Second Entity\"\n          onChangeDropDownItem={handleChange2Value}\n          isMulti={false}\n        />\n      </div>\n      <LineChart data={chartData} xAxis={xAxis} title=\"Compare 2 entities\" />\n    </div>\n  );\n};\n\nexport default Chart2;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}