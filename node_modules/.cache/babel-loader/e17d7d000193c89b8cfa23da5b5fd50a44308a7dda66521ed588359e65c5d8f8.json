{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{BarChart}from\"../../../components/Graph/barChart/BarChart\";import{getHttp}from\"../../../service/APIRequest\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Chart4=function Chart4(_ref){var selectedEntityList=_ref.selectedEntityList,entityList=_ref.entityList;var _useState=useState(),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setchartData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),xAxis=_useState4[0],setxAxis=_useState4[1];var _useState5=useState(selectedEntityList),_useState6=_slicedToArray(_useState5,2),selectedEntities=_useState6[0],setselectedEntities=_useState6[1];var _useState7=useState(entityList),_useState8=_slicedToArray(_useState7,2),allEntityList=_useState8[0],setallEntityList=_useState8[1];useEffect(function(){setallEntityList(allEntityList);setselectedEntities(selectedEntityList);getScoreOfEntityLatestDate(selectedEntityList);},[selectedEntityList]);var getScoreOfEntityLatestDate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(selectedEntities){var _entityLists,_entityLists2;var entityLists,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:entityLists=selectedEntities;if(((_entityLists=entityLists)===null||_entityLists===void 0?void 0:_entityLists.length)==0){entityLists=entityList===null||entityList===void 0?void 0:entityList.map(function(item){return item.label;});}_context.next=4;return getHttp(\"skills/latestScore\",{entityNames:(_entityLists2=entityLists)===null||_entityLists2===void 0?void 0:_entityLists2.join(\",\")});case 4:response=_context.sent;console.log(response);drawChart(response);case 7:case\"end\":return _context.stop();}},_callee);}));return function getScoreOfEntityLatestDate(_x){return _ref2.apply(this,arguments);};}();function drawChart(_x2){return _drawChart.apply(this,arguments);}function _drawChart(){_drawChart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(responseData){var dataOfChart,xAxisdata;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dataOfChart=[{name:\"Latest score of \"+responseData[0].monthlyAverages[0].month,//chartData?.map((company) => company.entityName),\ndata:responseData===null||responseData===void 0?void 0:responseData.map(function(company){return company.avg_score_diff;})}];//   name: responseData[0].companyName,\n//   data: responseData[0].monthlyAverages.map((monthlyAverage) => {\n//     return monthlyAverage.averageScore;\n//   }),\n// };\nxAxisdata=responseData===null||responseData===void 0?void 0:responseData.map(function(company){return company.companyName;});setxAxis(xAxisdata);setchartData(responseData===null||responseData===void 0?void 0:responseData.map(function(company){return company.monthlyAverages[0].averageScore;}));case 4:case\"end\":return _context2.stop();}},_callee2);}));return _drawChart.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(BarChart,{data:chartData,xAxis:xAxis,title:\"Latest value\",type:\"latest\"//yAxis={\"Latest score of \" + responseData[0].monthlyAverages[0].month}\n})]});};","map":{"version":3,"names":["React","useEffect","useState","BarChart","getHttp","Chart4","selectedEntityList","entityList","chartData","setchartData","xAxis","setxAxis","selectedEntities","setselectedEntities","allEntityList","setallEntityList","getScoreOfEntityLatestDate","entityLists","length","map","item","label","entityNames","join","response","console","log","drawChart","responseData","dataOfChart","name","monthlyAverages","month","data","company","avg_score_diff","xAxisdata","companyName","averageScore"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/Tabs/tab3/Chart4.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { BarChart } from \"../../../components/Graph/barChart/BarChart\";\nimport { getHttp } from \"../../../service/APIRequest\";\n\ninterface Chart4Props {\n  selectedEntityList?: any;\n  entityList?: any;\n}\nexport const Chart4: React.FC<Chart4Props> = ({\n  selectedEntityList,\n  entityList,\n}) => {\n  const [chartData, setchartData] = useState<any>();\n  const [xAxis, setxAxis] = useState([]);\n  const [selectedEntities, setselectedEntities] = useState(selectedEntityList);\n  const [allEntityList, setallEntityList] = useState(entityList);\n\n  useEffect(() => {\n    setallEntityList(allEntityList);\n    setselectedEntities(selectedEntityList);\n    getScoreOfEntityLatestDate(selectedEntityList);\n  }, [selectedEntityList]);\n\n  const getScoreOfEntityLatestDate = async (selectedEntities?) => {\n    var entityLists = selectedEntities;\n    if (entityLists?.length == 0) {\n      entityLists = entityList?.map((item) => item.label);\n    }\n    const response = await getHttp(\"skills/latestScore\", {\n      entityNames: entityLists?.join(\",\"),\n    });\n    console.log(response);\n    drawChart(response);\n  };\n\n  async function drawChart(responseData?) {\n    var dataOfChart = [\n      {\n        name: \"Latest score of \" + responseData[0].monthlyAverages[0].month, //chartData?.map((company) => company.entityName),\n        data: responseData?.map((company) => company.avg_score_diff),\n      },\n    ];\n    //   name: responseData[0].companyName,\n    //   data: responseData[0].monthlyAverages.map((monthlyAverage) => {\n    //     return monthlyAverage.averageScore;\n    //   }),\n    // };\n    var xAxisdata = responseData?.map((company) => company.companyName);\n    setxAxis(xAxisdata);\n    setchartData(\n      responseData?.map((company) => company.monthlyAverages[0].averageScore)\n    );\n  }\n\n  return (\n    <div>\n      {\" \"}\n      <BarChart\n        data={chartData}\n        xAxis={xAxis}\n        title={\"Latest value\"}\n        type=\"latest\"\n        //yAxis={\"Latest score of \" + responseData[0].monthlyAverages[0].month}\n      />\n    </div>\n  );\n};\n"],"mappings":"2dAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,6CAA6C,CACtE,OAASC,OAAO,KAAQ,6BAA6B,CAAC,wFAMtD,MAAO,IAAMC,OAA6B,CAAG,QAAhCA,OAA6B,MAGpC,IAFJC,mBAAkB,MAAlBA,kBAAkB,CAClBC,UAAU,MAAVA,UAAU,CAEV,cAAkCL,QAAQ,EAAO,wCAA1CM,SAAS,eAAEC,YAAY,eAC9B,eAA0BP,QAAQ,CAAC,EAAE,CAAC,yCAA/BQ,KAAK,eAAEC,QAAQ,eACtB,eAAgDT,QAAQ,CAACI,kBAAkB,CAAC,yCAArEM,gBAAgB,eAAEC,mBAAmB,eAC5C,eAA0CX,QAAQ,CAACK,UAAU,CAAC,yCAAvDO,aAAa,eAAEC,gBAAgB,eAEtCd,SAAS,CAAC,UAAM,CACdc,gBAAgB,CAACD,aAAa,CAAC,CAC/BD,mBAAmB,CAACP,kBAAkB,CAAC,CACvCU,0BAA0B,CAACV,kBAAkB,CAAC,CAChD,CAAC,CAAE,CAACA,kBAAkB,CAAC,CAAC,CAExB,GAAMU,2BAA0B,6FAAG,iBAAOJ,gBAAiB,2KACrDK,WAAW,CAAGL,gBAAgB,CAClC,GAAI,eAAAK,WAAW,uCAAX,aAAaC,MAAM,GAAI,CAAC,CAAE,CAC5BD,WAAW,CAAGV,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEY,GAAG,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACC,KAAK,GAAC,CACrD,CAAC,sBACsBjB,QAAO,CAAC,oBAAoB,CAAE,CACnDkB,WAAW,gBAAEL,WAAW,wCAAX,cAAaM,IAAI,CAAC,GAAG,CACpC,CAAC,CAAC,QAFIC,QAAQ,eAGdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrBG,SAAS,CAACH,QAAQ,CAAC,CAAC,qDACrB,kBAVKR,2BAA0B,6CAU/B,CAAC,QAEaW,UAAS,0IAAxB,kBAAyBC,YAAa,iJAChCC,WAAW,CAAG,CAChB,CACEC,IAAI,CAAE,kBAAkB,CAAGF,YAAY,CAAC,CAAC,CAAC,CAACG,eAAe,CAAC,CAAC,CAAC,CAACC,KAAK,CAAE;AACrEC,IAAI,CAAEL,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAET,GAAG,CAAC,SAACe,OAAO,QAAKA,QAAO,CAACC,cAAc,GAC7D,CAAC,CACF,CACD;AACA;AACA;AACA;AACA;AACIC,SAAS,CAAGR,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAET,GAAG,CAAC,SAACe,OAAO,QAAKA,QAAO,CAACG,WAAW,GAAC,CACnE1B,QAAQ,CAACyB,SAAS,CAAC,CACnB3B,YAAY,CACVmB,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAET,GAAG,CAAC,SAACe,OAAO,QAAKA,QAAO,CAACH,eAAe,CAAC,CAAC,CAAC,CAACO,YAAY,GAAC,CACxE,CAAC,uDACH,4CAED,mBACE,uBACG,GAAG,cACJ,KAAC,QAAQ,EACP,IAAI,CAAE9B,SAAU,CAChB,KAAK,CAAEE,KAAM,CACb,KAAK,CAAE,cAAe,CACtB,IAAI,CAAC,QACL;AAAA,EACA,GACE,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}