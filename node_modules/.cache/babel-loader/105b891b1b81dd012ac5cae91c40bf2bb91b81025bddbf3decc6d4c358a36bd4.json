{"ast":null,"code":"import _objectSpread from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import ErrorComponent from\"../../components/errorComponent/ErrorComponent\";import{UserList}from\"../../components/userList/UserList\";import{showErrorMesaage}from\"../../redux/features/errorSlice\";import Store from\"../../redux/Store\";import{getHttp,postHttp}from\"../../service/APIRequest\";import{userapi}from\"../../service/Config\";import{userTypes}from\"../../service/Constants\";import\"./UserCreation.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserCreation=function UserCreation(){var _useState=useState({name:\"\",username:\"\",email:\"\",role:\"main_admin\",entity:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),entityList=_useState4[0],setEntityList=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),flag=_useState6[0],setflag=_useState6[1];var _useState7=useState(\"admin\"),_useState8=_slicedToArray(_useState7,2),userType=_useState8[0],setUserType=_useState8[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var endpoint;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();endpoint=userapi+\"addUser\";postHttp(endpoint,userData).then(function(response){console.log(response);if(response.status>=200&&response.status<300){setUserData({name:\"\",username:\"\",email:\"\",role:\"\",entity:\"\",password:\"\"});Store.dispatch(showErrorMesaage(\"User created successfully\"));setflag(!flag);}}).catch(function(error){console.log(error);// Store.dispatch(showErrorMesaage(error.error));\n// //setresponseText(error);\n// clearFileInput();\n// handle error\n});case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleNameChange=function handleNameChange(event){var inputValue=event.target.value;var formattedName=inputValue.toLowerCase().replace(/\\s+/g,\".\");console.log(formattedName);setUserData(_objectSpread(_objectSpread({},userData),{},{name:event.target.value,username:formattedName}));//setName(inputValue);\n//setUsername(formattedName);\n};var handleUserTypeChange=function handleUserTypeChange(event){setUserType(event.target.value);setUserData(_objectSpread(_objectSpread({},userData),{},{role:event.target.value}));if(event.target.value==\"user\"){getEntityList();}};var getEntityList=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getHttp(\"entity/getNameDetails\");case 2:response=_context2.sent;_context2.next=5;return setEntityList(response);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function getEntityList(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"create-user-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-creation-form login-form1\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Creation\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"create-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"align-center\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:userData.name,onChange:function onChange(e){return(//setUserData({ ...userData, name: e.target.value })\nhandleNameChange(e));},className:\"button\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"align-center\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"USERNAME\",value:userData.username//   style={{ textTransform: \"lowercase\" }}\n// onChange={(e) =>\n//setUserData({ ...userData, username: e.target.value })\n// }\n,readOnly:true,className:\"button lowercase\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"align-center\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:userData.email,onChange:function onChange(e){return setUserData(_objectSpread(_objectSpread({},userData),{},{email:e.target.value}));},className:\"button\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"align-center\",children:\"Role\"}),/*#__PURE__*/_jsx(\"select\",{className:\"new-user button\",value:userType,onChange:handleUserTypeChange,children:userTypes.map(function(item,index){return/*#__PURE__*/_jsx(\"option\",{value:item.label,children:item.name},index);})})]}),userType===\"user\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"align-center\",children:\"Entity\"}),/*#__PURE__*/_jsx(\"select\",{className:\"new-user button\",value:userData.entity,onChange:function onChange(e){return setUserData(_objectSpread(_objectSpread({},userData),{},{entity:e.target.value}));},children:entityList===null||entityList===void 0?void 0:entityList.map(function(item,index){return/*#__PURE__*/_jsx(\"option\",{value:item.name,children:item.label},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"display-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"align-center\",children:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:userData.password,onChange:function onChange(e){return setUserData(_objectSpread(_objectSpread({},userData),{},{password:e.target.value}));},className:\"button\",required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create User\"}),/*#__PURE__*/_jsx(ErrorComponent,{})]})]}),/*#__PURE__*/_jsx(UserList,{refresh:flag})]});};","map":{"version":3,"names":["React","useState","ErrorComponent","UserList","showErrorMesaage","Store","getHttp","postHttp","userapi","userTypes","UserCreation","name","username","email","role","entity","password","userData","setUserData","entityList","setEntityList","flag","setflag","userType","setUserType","handleSubmit","e","preventDefault","endpoint","then","response","console","log","status","dispatch","catch","error","handleNameChange","event","inputValue","target","value","formattedName","toLowerCase","replace","handleUserTypeChange","getEntityList","map","item","index","label"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/createUser/UserCreation.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport DropDown from \"../../components/dropDown/DropDown\";\nimport ErrorComponent from \"../../components/errorComponent/ErrorComponent\";\nimport { UserList } from \"../../components/userList/UserList\";\nimport { showErrorMesaage } from \"../../redux/features/errorSlice\";\nimport Store from \"../../redux/Store\";\nimport { getHttp, postHttp } from \"../../service/APIRequest\";\nimport { userapi } from \"../../service/Config\";\nimport { userTypes } from \"../../service/Constants\";\nimport \"./UserCreation.css\";\n\nexport const UserCreation = () => {\n  const [userData, setUserData] = useState({\n    name: \"\",\n    username: \"\",\n    email: \"\",\n    role: \"main_admin\",\n    entity: \"\",\n    password: \"\",\n  });\n\n  const [entityList, setEntityList] = useState<any>();\n  const [flag, setflag] = useState(true);\n  const [userType, setUserType] = useState(\"admin\");\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const endpoint = userapi + \"addUser\";\n    postHttp(endpoint, userData)\n      .then((response) => {\n        console.log(response);\n\n        if (response.status >= 200 && response.status < 300) {\n          setUserData({\n            name: \"\",\n            username: \"\",\n            email: \"\",\n            role: \"\",\n            entity: \"\",\n            password: \"\",\n          });\n          Store.dispatch(showErrorMesaage(\"User created successfully\"));\n          setflag(!flag);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n        // Store.dispatch(showErrorMesaage(error.error));\n        // //setresponseText(error);\n        // clearFileInput();\n        // handle error\n      });\n  };\n\n  const handleNameChange = (event) => {\n    const inputValue = event.target.value;\n    const formattedName = inputValue.toLowerCase().replace(/\\s+/g, \".\");\n    console.log(formattedName);\n    setUserData({\n      ...userData,\n      name: event.target.value,\n      username: formattedName,\n    });\n    //setName(inputValue);\n\n    //setUsername(formattedName);\n  };\n\n  const handleUserTypeChange = (event) => {\n    setUserType(event.target.value);\n    setUserData({ ...userData, role: event.target.value });\n    if (event.target.value == \"user\") {\n      getEntityList();\n    }\n  };\n\n  const getEntityList = async () => {\n    const response = await getHttp(\"entity/getNameDetails\"); //\n    await setEntityList(response);\n  };\n\n  return (\n    <div className=\"create-user-container\">\n      <div className=\"user-creation-form login-form1\">\n        <h2>User Creation</h2>\n        <form onSubmit={handleSubmit} className=\"create-container\">\n          <div className=\"form-group\">\n            <div className=\"display-flex\">\n              <div className=\"align-center\">Name</div>\n              <input\n                type=\"text\"\n                placeholder=\"Name\"\n                value={userData.name}\n                onChange={(e) =>\n                  //setUserData({ ...userData, name: e.target.value })\n                  handleNameChange(e)\n                }\n                className=\"button\"\n                required\n              />\n            </div>\n            <div className=\"display-flex\">\n              <div className=\"align-center\">Username</div>\n              <input\n                type=\"text\"\n                placeholder=\"USERNAME\"\n                value={userData.username}\n                //   style={{ textTransform: \"lowercase\" }}\n                // onChange={(e) =>\n                //setUserData({ ...userData, username: e.target.value })\n                // }\n                readOnly\n                className=\"button lowercase\"\n              />\n            </div>\n            <div className=\"display-flex\">\n              <div className=\"align-center\">Email</div>\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                value={userData.email}\n                onChange={(e) =>\n                  setUserData({ ...userData, email: e.target.value })\n                }\n                className=\"button\"\n                required\n              />\n            </div>\n            <div className=\"display-flex\">\n              <div className=\"align-center\">Role</div>\n\n              <select\n                className=\"new-user button\"\n                value={userType}\n                onChange={handleUserTypeChange}\n              >\n                {userTypes.map((item, index) => (\n                  <option key={index} value={item.label}>\n                    {item.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            {userType === \"user\" && (\n              <div className=\"display-flex\">\n                <div className=\"align-center\">Entity</div>\n                <select\n                  className=\"new-user button\"\n                  value={userData.entity}\n                  onChange={(e) =>\n                    setUserData({ ...userData, entity: e.target.value })\n                  }\n                >\n                  {entityList?.map((item, index) => (\n                    <option key={index} value={item.name}>\n                      {item.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n\n            <div className=\"display-flex\">\n              <div className=\"align-center\">password</div>\n              <input\n                type=\"password\"\n                placeholder=\"password\"\n                value={userData.password}\n                onChange={(e) =>\n                  setUserData({ ...userData, password: e.target.value })\n                }\n                className=\"button\"\n                required\n              />\n            </div>\n          </div>\n          <button type=\"submit\">Create User</button>\n          <ErrorComponent />\n        </form>\n      </div>\n      <UserList refresh={flag} />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}