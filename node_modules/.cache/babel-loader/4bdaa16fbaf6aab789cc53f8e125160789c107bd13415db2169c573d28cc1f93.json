{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{BarChart}from\"../../components/Graph/barChart/BarChart\";import Doughnut from\"../../components/Graph/donutChart/Doughnut\";import{getHttp}from\"../../service/APIRequest\";import\"./CategoryDetails.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CategoryDetails=function CategoryDetails(_ref){var details=_ref.details,backButtonClicked=_ref.backButtonClicked;console.log(details);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subCategoryList=_useState2[0],setSubCategoryList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedRow=_useState4[0],setSelectedRow=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),chartData=_useState6[0],setchartData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),xAxis=_useState8[0],setxAxis=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),barchartTitile=_useState10[0],setbarchartTitile=_useState10[1];useEffect(function(){fetchCatagoryList(details.id);},[]);var fetchCatagoryList=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(param){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getHttp(\"categories/\"+details.id+\"/subcategories\");case 2:response=_context.sent;setSubCategoryList(response);case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchCatagoryList(_x){return _ref2.apply(this,arguments);};}();var clickedOnSubcategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(item,index){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(\"test\",item);item.count>0?setSelectedRow(index):console.log(\"not applicable\");_context2.next=4;return getHttp(\"categories/\"+details.id+\"/subcategory/\"+item.id).then(function(response){console.log(response);setbarchartTitile(item.category);drawChart(response);// handle success\n}).catch(function(error){console.log(error);// handle error\n});case 4:response=_context2.sent;case 5:case\"end\":return _context2.stop();}},_callee2);}));return function clickedOnSubcategory(_x2,_x3){return _ref3.apply(this,arguments);};}();function drawChart(_x4){return _drawChart.apply(this,arguments);}function _drawChart(){_drawChart=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(responseData){var xAxisdata;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:xAxisdata=responseData===null||responseData===void 0?void 0:responseData.map(function(item){return item.entityName;});//setbarchartTitile(barchartTitile);\nsetxAxis(xAxisdata);setchartData(responseData===null||responseData===void 0?void 0:responseData.map(function(item){return item.employeeNumber;}));case 3:case\"end\":return _context3.stop();}},_callee3);}));return _drawChart.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"top-padding-sub\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",onClick:backButtonClicked,children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../../assets/back.png\"),alt:\"\",width:\"50px\",height:\"50px\"})}),details.name,/*#__PURE__*/_jsxs(\"div\",{className:\"list-container\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"Subcategory name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"each-column-border\",children:\"# of employees \"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subCategoryList===null||subCategoryList===void 0?void 0:subCategoryList.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{className:selectedRow===index?\"highlight\":\"\",onClick:function onClick(){return clickedOnSubcategory(item,index);},children:[/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:item.category}),/*#__PURE__*/_jsx(\"td\",{className:\"each-column-border\",children:item.count})]});})})]}),/*#__PURE__*/_jsx(Doughnut,{heading:\" skills (Number of employees in each category)\",details:subCategoryList})]}),chartData&&xAxis&&/*#__PURE__*/_jsxs(\"div\",{className:\"barChart\",children:[barchartTitile,/*#__PURE__*/_jsx(BarChart,{data:chartData,xAxis:xAxis,title:\"Employee and entity details of  - \"+barchartTitile,name:\"Number of employees\"})]})]});};export default CategoryDetails;","map":{"version":3,"names":["React","useEffect","useState","BarChart","Doughnut","getHttp","CategoryDetails","details","backButtonClicked","console","log","subCategoryList","setSubCategoryList","selectedRow","setSelectedRow","chartData","setchartData","xAxis","setxAxis","barchartTitile","setbarchartTitile","fetchCatagoryList","id","param","response","clickedOnSubcategory","item","index","count","then","category","drawChart","catch","error","responseData","xAxisdata","map","entityName","employeeNumber","require","name"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/categoryDetails/CategoryDetails.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { BarChart } from \"../../components/Graph/barChart/BarChart\";\nimport Doughnut from \"../../components/Graph/donutChart/Doughnut\";\nimport { getHttp } from \"../../service/APIRequest\";\nimport \"./CategoryDetails.css\";\n\nconst CategoryDetails = ({ details, backButtonClicked }) => {\n  console.log(details);\n  const [subCategoryList, setSubCategoryList] = useState([]);\n  const [selectedRow, setSelectedRow] = useState(null);\n  const [chartData, setchartData] = useState<any>();\n  const [xAxis, setxAxis] = useState([]);\n  const [barchartTitile, setbarchartTitile] = useState(\"\");\n\n  useEffect(() => {\n    fetchCatagoryList(details.id);\n  }, []);\n\n  const fetchCatagoryList = async (param?) => {\n    const response = await getHttp(\n      \"categories/\" + details.id + \"/subcategories\"\n    );\n    setSubCategoryList(response);\n  };\n\n  const clickedOnSubcategory = async (item, index) => {\n    console.log(\"test\", item);\n    item.count > 0 ? setSelectedRow(index) : console.log(\"not applicable\");\n    const response = await getHttp(\n      \"categories/\" + details.id + \"/subcategory/\" + item.id\n    )\n      .then((response) => {\n        console.log(response);\n        setbarchartTitile(item.category);\n        drawChart(response);\n\n        // handle success\n      })\n      .catch((error) => {\n        console.log(error);\n        // handle error\n      });\n  };\n\n  async function drawChart(responseData?) {\n    var xAxisdata = responseData?.map((item) => item.entityName);\n    //setbarchartTitile(barchartTitile);\n    setxAxis(xAxisdata);\n    setchartData(responseData?.map((item) => item.employeeNumber));\n  }\n\n  return (\n    <div className=\"top-padding-sub\">\n      <div className=\"back-button\" onClick={backButtonClicked}>\n        <img\n          src={require(\"../../assets/back.png\")}\n          alt=\"\"\n          width=\"50px\"\n          height=\"50px\"\n        />\n      </div>\n\n      {details.name}\n      <div className=\"list-container\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th className=\"each-column-border\">Subcategory name</th>\n              <th className=\"each-column-border\"># of employees </th>\n            </tr>\n          </thead>\n          <tbody>\n            {subCategoryList?.map((item, index) => (\n              <tr\n                className={selectedRow === index ? \"highlight\" : \"\"}\n                onClick={() => clickedOnSubcategory(item, index)}\n              >\n                <td className=\"each-column-border\">{item.category}</td>\n                <td className=\"each-column-border\">{item.count}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        {/* <ul className=\"subcat-list\">\n          {\" \"}\n          {subCategoryList?.map((item, index) => (\n            <li>\n              {item.category} - {item.count}\n            </li>\n          ))}\n        </ul> */}\n        <Doughnut\n          heading={\" skills (Number of employees in each category)\"}\n          details={subCategoryList}\n        />\n      </div>\n      {/* <div className=\"content1\">\n        <Doughnut details={subCategoryList} heading=\"Dubai Skills %\" />\n      </div> */}\n      {chartData && xAxis && (\n        <div className=\"barChart\">\n          {/* <DonutChart\n              //details={chartDetails.data_analytics}\n              heading={props.entityName + \" skills\"}\n              details={roleCount}\n            /> */}\n          {/* <Doughnut\n          heading={\" skills (Number of employees in each category)\"}\n          details={subCategoryList}\n        /> */}\n          {barchartTitile}\n          <BarChart\n            data={chartData}\n            xAxis={xAxis}\n            title={\"Employee and entity details of  - \" + barchartTitile}\n            name=\"Number of employees\"\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CategoryDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}