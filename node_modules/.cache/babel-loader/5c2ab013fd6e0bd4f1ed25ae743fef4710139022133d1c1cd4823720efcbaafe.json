{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{DownloadExcel}from\"../../components/downloadExcel/DownloadExcel\";import DropDown from\"../../components/dropDown/DropDown\";import{SubHeader}from\"../../components/subHeader/SubHeader\";import{postHttp}from\"../../service/APIRequest\";import\"./FileUpload.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileUpload=function FileUpload(){// const [file, setFile] = useState(null);\n// const [selectedFile, setSelectedFile] = useState(null);\n// const [selectedFileType, setSelectedFileType] = useState(\"\");\n// const handleItemSelect = (event) => {\n//   console.log(event);\n//   setSelectedFile(event.target.files[0]);\n//   setSelectedFileType(event.target.value);\n// };\n// const handleFileChange = (e) => {\n//   setFile(e.target.files[0]);\n// };\n// const handleResponseText = () => {\n//   setresponseText(null);\n// };\nvar typeOfDropdown=[{id:1,label:\"Employee\",value:\"Employee\"},{id:2,label:\"Training\",value:\"Training\"},{id:3,label:\"Entity\",value:\"Entity\"}];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),responseText=_useState2[0],setresponseText=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedFile=_useState4[0],setSelectedFile=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedOption=_useState6[0],setSelectedOption=_useState6[1];var handleFileChange=function handleFileChange(event){setSelectedFile(event.target.files[0]);};var handleOptionChange=function handleOptionChange(event){console.log(event);setSelectedOption(event);};var resetResponseText=function resetResponseText(){setTimeout(function(){setresponseText(\"\");},10000);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(selectedOption){_context.next=5;break;}setresponseText(\"Please select an option from the dropdown\");return _context.abrupt(\"return\");case 5:if(selectedFile){_context.next=8;break;}setresponseText(\"Please select one file to upload\");return _context.abrupt(\"return\");case 8:formData=new FormData();formData.append(\"file\",selectedFile);formData.append(\"option\",selectedOption.value);setresponseText(\"\");postHttp(\"upload\",formData).then(function(response){// console.log(response);\nsetresponseText(response);setSelectedFile(null);setSelectedOption(null);clearFileInput();// handle success\n}).catch(function(error){console.log(error);setresponseText(error);clearFileInput();// handle error\n});case 13:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var clearFileInput=function clearFileInput(){resetResponseText();var inputElement=document.getElementById(\"file\");if(inputElement){inputElement.value=\"\";// Clear the input value\n}};var userDeatils=JSON.parse(sessionStorage.getItem(\"userDetails\"));return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(SubHeader,{pageHeadding:\"File Upload \".concat(userDeatils.entity),showBreadcrumbs:true}),/*#__PURE__*/_jsx(DropDown,{mainList:typeOfDropdown,name:\"\",onChangeDropDownItem:handleOptionChange,isMulti:false,classname:\"flex\",placeholder:\"Select an option\",value:selectedOption}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-browser\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:\"Select a file:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",onChange:handleFileChange,accept:\".xls, .xlsx\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-button std unwanted text\",onClick:handleSubmit,children:\"Upload\"}),/*#__PURE__*/_jsx(\"div\",{className:\"response-text\",children:responseText})]}),/*#__PURE__*/_jsx(DownloadExcel,{})]});};export default FileUpload;","map":{"version":3,"names":["React","useState","DownloadExcel","DropDown","SubHeader","postHttp","FileUpload","typeOfDropdown","id","label","value","responseText","setresponseText","selectedFile","setSelectedFile","selectedOption","setSelectedOption","handleFileChange","event","target","files","handleOptionChange","console","log","resetResponseText","setTimeout","handleSubmit","formData","FormData","append","then","response","clearFileInput","catch","error","inputElement","document","getElementById","userDeatils","JSON","parse","sessionStorage","getItem","entity"],"sources":["/Users/eanas.v/Desktop/DESC-Projects/2023/DB-managmnt-app/dashboard/src/pages/dataFileUpload/FileUpload.tsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { DownloadExcel } from \"../../components/downloadExcel/DownloadExcel\";\nimport DropDown from \"../../components/dropDown/DropDown\";\nimport { SubHeader } from \"../../components/subHeader/SubHeader\";\nimport { postHttp } from \"../../service/APIRequest\";\nimport \"./FileUpload.css\";\n\nconst FileUpload = () => {\n  // const [file, setFile] = useState(null);\n  // const [selectedFile, setSelectedFile] = useState(null);\n  // const [selectedFileType, setSelectedFileType] = useState(\"\");\n\n  // const handleItemSelect = (event) => {\n  //   console.log(event);\n  //   setSelectedFile(event.target.files[0]);\n  //   setSelectedFileType(event.target.value);\n  // };\n\n  // const handleFileChange = (e) => {\n  //   setFile(e.target.files[0]);\n  // };\n\n  // const handleResponseText = () => {\n  //   setresponseText(null);\n  // };\n\n  var typeOfDropdown = [\n    { id: 1, label: \"Employee\", value: \"Employee\" },\n    { id: 2, label: \"Training\", value: \"Training\" },\n    { id: 3, label: \"Entity\", value: \"Entity\" },\n  ];\n  const [responseText, setresponseText] = useState(null);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [selectedOption, setSelectedOption] = useState(null);\n\n  const handleFileChange = (event) => {\n    setSelectedFile(event.target.files[0]);\n  };\n\n  const handleOptionChange = (event) => {\n    console.log(event);\n    setSelectedOption(event);\n  };\n\n  const resetResponseText = () => {\n    setTimeout(() => {\n      setresponseText(\"\");\n    }, 10000);\n  };\n\n  const handleSubmit = async () => {\n    if (!selectedOption) {\n      setresponseText(\"Please select an option from the dropdown\");\n      return;\n    } else if (!selectedFile) {\n      setresponseText(\"Please select one file to upload\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    formData.append(\"option\", selectedOption.value);\n    setresponseText(\"\");\n    postHttp(\"upload\", formData)\n      .then((response) => {\n        // console.log(response);\n        setresponseText(response);\n        setSelectedFile(null);\n        setSelectedOption(null);\n        clearFileInput();\n        // handle success\n      })\n      .catch((error) => {\n        console.log(error);\n        setresponseText(error);\n        clearFileInput();\n        // handle error\n      });\n  };\n\n  const clearFileInput = () => {\n    resetResponseText();\n    const inputElement = document.getElementById(\"file\") as HTMLInputElement;\n    if (inputElement) {\n      inputElement.value = \"\"; // Clear the input value\n    }\n  };\n  var userDeatils = JSON.parse(sessionStorage.getItem(\"userDetails\"));\n\n  return (\n    <div className=\"upload-container \">\n      <div className=\"content\">\n        <SubHeader\n          pageHeadding={`File Upload ${userDeatils.entity}`}\n          showBreadcrumbs={true}\n        />\n\n        <DropDown\n          mainList={typeOfDropdown}\n          name=\"\"\n          onChangeDropDownItem={handleOptionChange}\n          isMulti={false}\n          classname=\"flex\"\n          placeholder={\"Select an option\"}\n          value={selectedOption}\n        />\n        <div className=\"file-browser\">\n          <label htmlFor=\"file\">Select a file:</label>\n          <input\n            type=\"file\"\n            id=\"file\"\n            onChange={handleFileChange}\n            accept=\".xls, .xlsx\"\n          />\n        </div>\n        <button\n          className=\"filter-button std unwanted text\"\n          onClick={handleSubmit}\n        >\n          Upload\n        </button>\n        <div className=\"response-text\">{responseText}</div>\n      </div>\n      <DownloadExcel />\n    </div>\n  );\n};\n\nexport default FileUpload;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}